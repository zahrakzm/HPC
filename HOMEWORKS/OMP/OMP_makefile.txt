CC=icc
CFLAGS=-qopenmp
TARGET=omp_homework
SRC=OMP_homework.c

# Values of N
NS=100 10000 1000000
# Values of num_threads
THREADS=1 2 4 8 12 16 20 24

all: $(TARGET)

$(TARGET): $(SRC)
	$(CC) $(CFLAGS) -o $(TARGET) $(SRC)

run:
	@$(foreach N, $(NS), \
		$(foreach THREAD, $(THREADS), \
			echo Running with N=$(N) and THREADS=$(THREAD); \
			./$(TARGET) $(N) $(THREAD); \
		) \
	)

clean:
	rm -f $(TARGET)

.PHONY: all run clean
